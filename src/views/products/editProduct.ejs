<%- include('./partials/head', {title: 'Editar producto - La Casa de la Musica' }) %>

    <body>
        <%- include('./partials/header') %>
            <main>
                <h3 class="titulo-login">EDITAR PRODUCTO</h3>

                <form action="/products/<%= product.id %>?_method=PUT" method="POST" class="formulario-login"
                    enctype="multipart/form-data">
                    <div class="primera-parte">
                        <div class="casillero">
                            <label for="name" class="label-1">Nombre del producto:</label>
                            <input type="text" name="name" value="<%= locals.oldData ? oldData.name : product.name %>"
                                class="input-1 <%= (locals.errors && errors.name) ? 'input-danger' : null %>">
                            <% if (locals.errors && errors.name) { %>
                                <div class="warning-text">
                                    <i class="fas fa-exclamation-circle"></i>
                                    <%= errors.name.msg %>
                                </div>
                                <% } %>
                        </div>
                        <div class="casillero">
                            <label for="price" class="label-1">Precio del producto:</label>
                            <input type="text" name="price"
                                value="<%= locals.oldData ? oldData.price : product.price %>"
                                class="input-1 <%= (locals.errors && errors.price) ? 'input-danger' : null %>">
                            <% if (locals.errors && errors.price) { %>
                                <div class="warning-text">
                                    <i class="fas fa-exclamation-circle"></i>
                                    <%= errors.price.msg %>
                                </div>
                                <% } %>
                        </div>
                        <div class="casillero">
                            <label for="sku" class="label-1">SKU:</label>
                            <input type="number" name="sku" value="<%= locals.oldData ? oldData.sku : product.sku %>"
                                class="input-1 <%= (locals.errors && errors.sku) ? 'input-danger' : null %>">
                            <% if (locals.errors && errors.sku) { %>
                                <div class="warning-text">
                                    <i class="fas fa-exclamation-circle"></i>
                                    <%= errors.sku.msg %>
                                </div>
                                <% } %>
                        </div>
                        <div class="casillero">
                            <label for="stock" class="label-1">Stock:</label>
                            <input type="number" name="stock"
                                value="<%= locals.oldData ? oldData.stock : product.stock %>"
                                class="input-1 <%= (locals.errors && errors.stock) ? 'input-danger' : null %>">
                            <% if (locals.errors && errors.stock) { %>
                                <div class="warning-text">
                                    <i class="fas fa-exclamation-circle"></i>
                                    <%= errors.stock.msg %>
                                </div>
                                <% } %>
                        </div>
                    </div>
                    <div class="casillero">
                        <label for="classification" class="label-1">Clasificacion:</label>
                        <select name="classification" id="classification"
                            class="input-select <%= (locals.errors && errors.classification) ? 'input-danger' : null %>">
                            <option value=""></option>
                            <option value="main-top" <%=(locals.oldData && oldData.classification==='main-top' ) ||
                                product.classification=='main-top' ? 'selected' : ' ' %>>Nuevos Productos</option>
                            <option value="main-bottom" <%=(locals.oldData && oldData.classification==='main-bottom' )
                                || product.classification=='main-bottom' ? 'selected' : ' ' %>>Ofertas Destacadas
                            </option>
                        </select>
                        <% if (locals.errors && errors.classification) { %>
                            <div class="warning-text">
                                <i class="fas fa-exclamation-circle"></i>
                                <%= errors.classification.msg %>
                            </div>
                            <% } %>
                    </div>
                    <div class="casillero">
                        <label for="category_id" class="label-1">Categoria:</label>
                        <select name="category_id" id="category_id"
                            class="input-select <%= (locals.errors && errors.category_id) ? 'input-danger' : null %>">

                            <% if (locals.categories) { %>
                                <option></option>
                                <% for (let i=0; i < categories.length; i++) { %>
                                    <option value="<%=categories[i].category_id%>" <%= locals.oldData &&
                                        oldData.category_id==categories[i].category_id ? 'selected' : '' %>>
                                        <%= categories[i].name %>
                                    </option>
                                    <% } %>
                                    <% } %>

                        </select>
                        <% if (locals.errors && errors.category_id) { %>
                            <div class="warning-text">
                                <i class="fas fa-exclamation-circle"></i>
                                <%= errors.category_id.msg %>
                            </div>
                            <% } %>


                    </div>
                    <div class="casillero">
                        <label for="brand_id" class="label-1">Marca:</label>
                        <select name="brand_id" id="brand_id"
                            class="input-select <%= (locals.errors && errors.brand_id) ? 'input-danger' : null %>">

                            <% if (locals.brands) { %>
                                <option></option>
                                <% for (let i=0; i < brands.length; i++) { %>
                                    <option value="<%=brands[i].brand_id%>" <%=(locals.oldData &&
                                        oldData.brand_id==brands[i].brand_id)
                                        ? 'selected' : '' %>>
                                        <%= brands[i].name %>
                                    </option>
                                    <% } %>
                                        <% } %>

                        </select>
                        <% if (locals.errors && errors.brand_id) { %>
                            <div class="warning-text">
                                <i class="fas fa-exclamation-circle"></i>
                                <%= errors.brand_id.msg %>
                            </div>
                            <% } %>


                    </div>
                    <div class="casillero">
                        <label for="type" class="label-1">Tipo de producto:</label>
                        <input type="text" name="type" value="<%= locals.oldData ? oldData.type : product.type %>"
                            class="input-1 <%= (locals.errors && errors.type) ? 'input-danger' : null %>">
                        <% if (locals.errors && errors.type) { %>
                            <div class="warning-text">
                                <i class="fas fa-exclamation-circle"></i>
                                <%= errors.type.msg %>
                            </div>
                            <% } %>
                    </div>
                    <div class="casillero">
                        <label for="description" class="label-1">Descipci√≥n:</label>
                        <textarea name="description" id="description"
                            class="input-textarea <%= (locals.errors && errors.description) ? 'input-danger' : null %>"><%= locals.oldData ? oldData.description : product.description%></textarea>
                        <% if (locals.errors && errors.description) { %>
                            <div class="warning-text">
                                <i class="fas fa-exclamation-circle"></i>
                                <%= errors.description.msg %>
                            </div>
                            <% } %>
                    </div>

                    <div class="linea-ciudad">
                        <div class="casillero">
                            <label for="imagen1" class="label-1">Imagen:</label>
                            <input type="file" name="image1"
                                class="input-file <%= (locals.errors && errors.image1) ? 'input-danger' : null %>">
                            <% if (locals.errors && errors.image1) { %>
                                <div class="warning-text">
                                    <i class="fas fa-exclamation-circle"></i>
                                    <%= errors.image1.msg %>
                                </div>
                                <% } %>
                        </div>

                    </div>
                    <div class="casillero">
                        <button type="submit" class="boton-login">EDITAR PRODUCTO</button>
                    </div>
                </form>
                <div class="casillero">
                    <form action="/products/<%= product.id %>?_method=DELETE" method="POST"
                        class="form-boton-allproducts">
                        <button type="submit" class="boton-delete">ELIMINAR PRODUCTO</button>
                    </form>
                </div>
            </main>






            <%- include('./partials/footer') %>
    </body>

    </html>